import{r as a,aP as wo,a4 as C,a5 as P,j as z}from"./index-1d78c4ac.js";import{g as Eo,c as bo,s as so,u as To,d as Q,e as Ro}from"./Box-3b2e6d90.js";import{M as So}from"./Modal-5026ae4f.js";import{P as Oo,a as Z,i as Co}from"./Grid-ba112631.js";import{o as oo}from"./useId-521a9597.js";import{o as eo}from"./ownerWindow-f1e1d6ee.js";import{d as zo}from"./debounce-517eeb3c.js";import{G as Mo}from"./Grow-cf41a8df.js";function _o(t){return Eo("MuiPopover",t)}bo("MuiPopover",["root","paper"]);const ko=["onEntering"],Lo=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],Wo=["slotProps"];function to(t,o){let s=0;return typeof o=="number"?s=o:o==="center"?s=t.height/2:o==="bottom"&&(s=t.height),s}function no(t,o){let s=0;return typeof o=="number"?s=o:o==="center"?s=t.width/2:o==="right"&&(s=t.width),s}function ro(t){return[t.horizontal,t.vertical].map(o=>typeof o=="number"?`${o}px`:o).join(" ")}function M(t){return typeof t=="function"?t():t}const jo=t=>{const{classes:o}=t;return Ro({root:["root"],paper:["paper"]},_o,o)},Do=so(So,{name:"MuiPopover",slot:"Root",overridesResolver:(t,o)=>o.root})({}),$o=so(Oo,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,o)=>o.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Ho=a.forwardRef(function(o,s){var _,k,L;const x=wo({props:o,name:"MuiPopover"}),{action:io,anchorEl:p,anchorOrigin:m={vertical:"top",horizontal:"left"},anchorPosition:W,anchorReference:v="anchorEl",children:lo,className:ao,container:po,elevation:j=8,marginThreshold:i=16,open:f,PaperProps:co={},slots:y,slotProps:w,transformOrigin:g={vertical:"top",horizontal:"left"},TransitionComponent:E=Mo,transitionDuration:b="auto",TransitionProps:{onEntering:D}={},disableScrollLock:T=!1}=x,$=C(x.TransitionProps,ko),fo=C(x,Lo),u=(_=w==null?void 0:w.paper)!=null?_:co,R=a.useRef(),uo=To(R,u.ref),S=P({},x,{anchorOrigin:m,anchorReference:v,elevation:j,marginThreshold:i,externalPaperSlotProps:u,transformOrigin:g,TransitionComponent:E,transitionDuration:b,TransitionProps:$}),H=jo(S),N=a.useCallback(()=>{if(v==="anchorPosition")return W;const e=M(p),r=(e&&e.nodeType===1?e:oo(R.current).body).getBoundingClientRect();return{top:r.top+to(r,m.vertical),left:r.left+no(r,m.horizontal)}},[p,m.horizontal,m.vertical,W,v]),A=a.useCallback(e=>({vertical:to(e,g.vertical),horizontal:no(e,g.horizontal)}),[g.horizontal,g.vertical]),U=a.useCallback(e=>{const n={width:e.offsetWidth,height:e.offsetHeight},r=A(n);if(v==="none")return{top:null,left:null,transformOrigin:ro(r)};const V=N();let d=V.top-r.vertical,h=V.left-r.horizontal;const X=d+n.height,Y=h+n.width,q=eo(M(p)),J=q.innerHeight-i,K=q.innerWidth-i;if(i!==null&&d<i){const l=d-i;d-=l,r.vertical+=l}else if(i!==null&&X>J){const l=X-J;d-=l,r.vertical+=l}if(i!==null&&h<i){const l=h-i;h-=l,r.horizontal+=l}else if(Y>K){const l=Y-K;h-=l,r.horizontal+=l}return{top:`${Math.round(d)}px`,left:`${Math.round(h)}px`,transformOrigin:ro(r)}},[p,v,N,A,i]),[ho,F]=a.useState(f),c=a.useCallback(()=>{const e=R.current;if(!e)return;const n=U(e);n.top!==null&&(e.style.top=n.top),n.left!==null&&(e.style.left=n.left),e.style.transformOrigin=n.transformOrigin,F(!0)},[U]);a.useEffect(()=>(T&&window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)),[p,T,c]);const Po=(e,n)=>{D&&D(e,n),c()},mo=()=>{F(!1)};a.useEffect(()=>{f&&c()}),a.useImperativeHandle(io,()=>f?{updatePosition:()=>{c()}}:null,[f,c]),a.useEffect(()=>{if(!f)return;const e=zo(()=>{c()}),n=eo(p);return n.addEventListener("resize",e),()=>{e.clear(),n.removeEventListener("resize",e)}},[p,f,c]);let G=b;b==="auto"&&!E.muiSupportAuto&&(G=void 0);const vo=po||(p?oo(M(p)).body:void 0),O=(k=y==null?void 0:y.root)!=null?k:Do,I=(L=y==null?void 0:y.paper)!=null?L:$o,go=Z({elementType:I,externalSlotProps:P({},u,{style:ho?u.style:P({},u.style,{opacity:0})}),additionalProps:{elevation:j,ref:uo},ownerState:S,className:Q(H.paper,u==null?void 0:u.className)}),B=Z({elementType:O,externalSlotProps:(w==null?void 0:w.root)||{},externalForwardedProps:fo,additionalProps:{ref:s,slotProps:{backdrop:{invisible:!0}},container:vo,open:f},ownerState:S,className:Q(H.root,ao)}),{slotProps:xo}=B,yo=C(B,Wo);return z.jsx(O,P({},yo,!Co(O)&&{slotProps:xo,disableScrollLock:T},{children:z.jsx(E,P({appear:!0,in:f,onEntering:Po,onExited:mo,timeout:G},$,{children:z.jsx(I,P({},go,{children:lo}))}))}))}),Xo=Ho;export{Xo as P,$o as a};
