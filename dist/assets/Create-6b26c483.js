import{r as b,b1 as z,j as e}from"./index-1d78c4ac.js";import{B as U}from"./Breadcrumb-4b5ba697.js";import{P as G}from"./PageContainer-51f17055.js";import{I as X,a as H}from"./index-6cbb6c02.js";import{X as R,aX as V,ao as q}from"./index.esm-4ca6571d.js";import{C as x}from"./CustomFormLabel-ad90862e.js";import{C as K}from"./CustomSelect-caffa199.js";import{C as h}from"./CustomTextField-cf77374e.js";import{i as L,f as _}from"./index-0f1c3eaf.js";import{B as d,T as s}from"./Box-3b2e6d90.js";import{S as g}from"./Stack-74791772.js";import{B as C}from"./Button-6de5bece.js";import{D as S}from"./Divider-32914f08.js";import{M as T}from"./MenuItem-39bf6f11.js";import{G as u,P as $}from"./Grid-ba112631.js";import{T as J}from"./TableContainer-e51d3cfd.js";import{T as Q,a as Y,b as A,c as l,d as Z}from"./TableRow-47830db4.js";import{T as w}from"./Tooltip-58d28098.js";import{I as D}from"./IconButton-6eb83b27.js";import{A as ee}from"./Alert-eeacdfc1.js";import{B as te}from"./BlankCard-65d5aa30.js";import{C as re}from"./CardContent-97c31a3d.js";import"./Link-5958468e.js";import"./Select-07709760.js";import"./Popover-e3ff4288.js";import"./Modal-5026ae4f.js";import"./useId-521a9597.js";import"./ownerWindow-f1e1d6ee.js";import"./createChainedFunction-0bab83cf.js";import"./utils-f13413e5.js";import"./Portal-8f313b54.js";import"./debounce-517eeb3c.js";import"./Grow-cf41a8df.js";import"./List-eaf26c6f.js";import"./utils-5ebfb48b.js";import"./useControlled-05793c79.js";import"./formControlState-a1fb9590.js";import"./useFormControl-9666228d.js";import"./TextField-84ec9af9.js";import"./FormControl-8a17c62f.js";import"./isMuiElement-a2555389.js";import"./index-5a0c5ef2.js";import"./createStack-08af7ebe.js";import"./styled-db48c038.js";import"./useThemeProps-a461f42f.js";import"./dividerClasses-40064371.js";import"./listItemTextClasses-76a31095.js";import"./Popper-880e6f72.js";import"./createPopper-04c39de4.js";import"./useSlot-a49cf6b5.js";import"./Close-feb8b2ff.js";import"./Card-ed0a9074.js";const ie=()=>{const{addInvoice:B,invoices:j}=b.useContext(X),[W,y]=b.useState(!1),I=z(),[o,c]=b.useState({id:0,billFrom:"",billTo:"",totalCost:0,status:"Pending",billFromAddress:"",billToAddress:"",orders:[{itemName:"",unitPrice:"",units:"",unitTotalPrice:0}],vat:0,grandTotal:0,subtotal:0,date:new Date().toISOString().split("T")[0]});b.useEffect(()=>{if(j.length>0){const r=j[j.length-1].id;c(t=>({...t,id:r+1}))}else c(r=>({...r,id:1}))},[j]);const f=r=>{let t=0;r.forEach(n=>{const m=parseFloat(n.unitPrice)||0,k=parseInt(n.units)||0,P=m*k;t+=P,n.unitTotalPrice=P});const i=t*.1,a=t+i;return{subtotal:t,vat:i,grandTotal:a}},p=r=>{const{name:t,value:i}=r.target;c(a=>{const n={...a,[t]:i},m=f(n.orders);return{...n,...m}})},v=(r,t,i)=>{c(a=>{const n=[...a.orders];n[r]={...n[r],[t]:i};const m=f(n);return{...a,orders:n,...m}})},F=()=>{c(r=>{const t=[...r.orders,{itemName:"",unitPrice:"",units:"",unitTotalPrice:0}],i=f(t);return{...r,orders:t,...i}})},E=r=>{c(t=>{const i=t.orders.filter((n,m)=>m!==r),a=f(i);return{...t,orders:i,...a}})},O=async r=>{r.preventDefault();try{await B(o),c({id:0,billFrom:"",billTo:"",totalCost:0,status:"Pending",billFromAddress:"",billToAddress:"",orders:[{itemName:"",unitPrice:"",units:"",unitTotalPrice:0}],vat:0,grandTotal:0,subtotal:0,date:new Date().toISOString().split("T")[0]}),y(!0),setTimeout(()=>{y(!1)},5e3),I("/apps/invoice/list")}catch(t){console.error("Error adding invoice:",t)}},N=L(new Date(o.date))?new Date(o.date):new Date,M=_(N,"EEEE, MMMM dd, yyyy");return e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:O,children:e.jsxs(d,{children:[e.jsxs(g,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",mb:3,children:[e.jsxs(s,{variant:"h5",children:["# ",o.id]}),e.jsxs(d,{display:"flex",gap:1,children:[e.jsx(C,{variant:"outlined",color:"error",onClick:()=>{I("/apps/invoice/list")},children:"Cancel"}),e.jsx(C,{type:"submit",variant:"contained",color:"primary",children:"Create Invoice"})]})]}),e.jsx(S,{}),e.jsxs(g,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsxs(d,{children:[e.jsx(x,{htmlFor:"demo-simple-select",children:"Order Status"}),e.jsxs(K,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:o.status,onChange:p,disabled:!0,children:[e.jsx(T,{value:"Pending",children:"Pending"}),e.jsx(T,{value:"Shipped",children:"Shipped"}),e.jsx(T,{value:"Delivered",children:"Delivered"})]})]}),e.jsxs(d,{textAlign:"right",children:[e.jsx(x,{htmlFor:"demo-simple-select",children:"Order Date"}),e.jsxs(s,{variant:"body1",children:[" ",M]})]})]}),e.jsx(S,{}),e.jsxs(u,{container:!0,spacing:3,mb:4,children:[e.jsxs(u,{item:!0,xs:12,sm:6,children:[e.jsx(x,{htmlFor:"bill-from",children:"Bill From"}),e.jsx(h,{id:"bill-from",name:"billFrom",value:o.billFrom,onChange:p,fullWidth:!0})]}),e.jsxs(u,{item:!0,xs:12,sm:6,children:[e.jsx(x,{htmlFor:"bill-to",sx:{mt:{xs:0,sm:3}},children:"Bill To"}),e.jsx(h,{name:"billTo",value:o.billTo,onChange:p,fullWidth:!0})]}),e.jsxs(u,{item:!0,xs:12,sm:6,children:[e.jsx(x,{htmlFor:"From Address",sx:{mt:0},children:"From Address"}),e.jsx(h,{name:"billFromAddress",value:o.billFromAddress,onChange:p,fullWidth:!0})]}),e.jsxs(u,{item:!0,xs:12,sm:6,children:[e.jsx(x,{htmlFor:"Bill To Address",sx:{mt:0},children:"Bill To Address"}),e.jsx(h,{name:"billToAddress",value:o.billToAddress,onChange:p,fullWidth:!0})]})]}),e.jsxs(g,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(s,{variant:"h6",children:"Items Details :"}),e.jsx(C,{onClick:F,variant:"contained",color:"primary",startIcon:e.jsx(R,{width:18}),children:"Add Item"})]}),e.jsx($,{variant:"outlined",children:e.jsx(J,{sx:{whiteSpace:{xs:"nowrap",md:"unset"}},children:e.jsxs(Q,{children:[e.jsx(Y,{children:e.jsxs(A,{children:[e.jsx(l,{children:e.jsx(s,{variant:"h6",fontSize:"14px",children:"Item Name"})}),e.jsx(l,{children:e.jsx(s,{variant:"h6",fontSize:"14px",children:"Unit Price"})}),e.jsx(l,{children:e.jsx(s,{variant:"h6",fontSize:"14px",children:"Units"})}),e.jsx(l,{children:e.jsx(s,{variant:"h6",fontSize:"14px",children:"Total Cost"})}),e.jsx(l,{}),e.jsx(l,{children:e.jsx(s,{variant:"h6",fontSize:"14px",children:"Actions"})})]})}),e.jsx(Z,{children:o.orders.map((r,t)=>e.jsxs(A,{children:[e.jsx(l,{children:e.jsx(h,{type:"text",value:r.itemName,placeholder:"Item Name",onChange:i=>v(t,"itemName",i.target.value),fullWidth:!0})}),e.jsx(l,{children:e.jsx(h,{type:"number",value:r.unitPrice,placeholder:"Unit Price",onChange:i=>v(t,"unitPrice",i.target.value),fullWidth:!0})}),e.jsx(l,{children:e.jsx(h,{type:"number",value:r.units,placeholder:"Units",onChange:i=>v(t,"units",i.target.value),fullWidth:!0})}),e.jsx(l,{children:e.jsx(s,{variant:"body1",children:r.unitTotalPrice})}),e.jsx(l,{}),e.jsxs(l,{children:[e.jsx(w,{title:"Add Item",children:e.jsx(D,{onClick:F,color:"primary",children:e.jsx(V,{width:22})})}),e.jsx(w,{title:"Delete Item",children:e.jsx(D,{onClick:()=>E(t),color:"error",children:e.jsx(q,{width:22})})})]})]},t))})]})})}),e.jsxs(d,{p:3,bgcolor:"primary.light",mt:3,children:[e.jsxs(d,{display:"flex",justifyContent:"end",gap:3,mb:3,children:[e.jsx(s,{variant:"body1",fontWeight:600,children:"Sub Total:"}),e.jsx(s,{variant:"body1",fontWeight:600,children:o.subtotal})]}),e.jsxs(d,{display:"flex",justifyContent:"end",gap:3,mb:3,children:[e.jsx(s,{variant:"body1",fontWeight:600,children:"VAT:"}),e.jsx(s,{variant:"body1",fontWeight:600,children:o.vat})]}),e.jsxs(d,{display:"flex",justifyContent:"end",gap:3,children:[e.jsx(s,{variant:"body1",fontWeight:600,children:"Grand Total:"}),e.jsx(s,{variant:"body1",fontWeight:600,children:o.grandTotal})]})]}),W&&e.jsx(ee,{severity:"success",sx:{position:"fixed",top:16,right:16},children:"Invoice added successfully."})]})})})},se=[{to:"/",title:"Home"},{title:"Invoice Create"}],it=()=>e.jsx(H,{children:e.jsxs(G,{title:"Create Invoice",description:"this is Create Invoice",children:[e.jsx(U,{title:"Create Invoice",items:se}),e.jsx(te,{children:e.jsx(re,{children:e.jsx(ie,{})})})]})});export{it as default};
